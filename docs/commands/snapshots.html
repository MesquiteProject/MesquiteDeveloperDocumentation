<!--This file created 28.2.99 11:10 PM by Claris Home Page version 2.0-->
<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="Adobe GoLive 4">
		<title>Snapshots</title>
		<x-sas-window top="82" bottom="609" left="237" right="917">
	</head>

	<body bgcolor="#ffe4b5">
		<table border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td bgcolor="black"><img src="../images/devIcon.gif"></td>
				<td>
					<table border="0" cellpadding="0" cellspacing="1" width="75">
						<tr>
							<td><font color="#009999">
								<table width="636" border="1" cellpadding="0" cellspacing="1">
									<tr>
										<td align="center"><a href="../Mesquite_development.html"><font color="#330099">General</font></a></td>
										<td align="center"><a href="../modularity/architecture.html"><font color="#330099">Modularity</font></a></td>
										<td align="center"><a href="../exampleModule/exampleIntro.html"><font color="#330099">Example Module</font></a></td>
										<td align="center"><a href="../files/files.html"><font color="#330099">Projects &amp; Files</font></a></td>
										<td align="center" bgcolor="#66ff66"><a href="commands.html"><font color="#330099">Commands</font></a><a href="../modularity/duty_classes.html"><font color="#330099"> &amp; Scripting</font></a></td>
									</tr>
									<tr>
										<td align="center"><a href="../windows.html"><font color="#330099">Windows</font></a></td>
										<td align="center"><a href="../menus.html"><font color="#330099">Menus</font></a></td>
										<td align="center"><a href="../charts/charts.html"><font color="#330099">Charts</font></a></td>
										<td align="center"><a href="../tables/tables.html"><font color="#330099">Tables</font></a></td>
										<td align="center"><a href="../buttons_and_tools.html"><font color="#330099">Buttons &amp; tools</font></a></td>
									</tr>
									<tr>
										<td align="center"><a href="../treesTaxa/trees.html"><font color="#330099">Trees and Taxa</font></a></td>
										<td align="center"><a href="../characters/character_data.html"><font color="#330099">Characters &amp; Models</font></a></td>
										<td align="center"><a href="../documentation.html"><font color="#330099">Documentation</font></a></td>
										<td align="center"><a href="../Utilities.html"><font color="#330099">General Utilities</font></a></td>
										<td align="center"></td>
									</tr>
								</table>
								</font></td>
						</tr>
						<tr>
							<td>
								<table border="1" cellpadding="0" cellspacing="1" width="636">
									<tr>
										<td bgcolor="#66ff66"><img height="12" width="7" src="../images/raindrop.gif"> <a href="commands.html">Commands</a> <img height="12" width="7" src="../images/raindrop.gif"> <a href="scripting.html">Scripting</a> <img height="12" width="7" src="../images/raindrop.gif"> <a href="snapshots.html">Snapshots</a> <img height="12" width="7" src="../images/raindrop.gif"> <a href="macros.html">Macros</a> <img height="12" width="7" src="../images/raindrop.gif"> <a href="cloning.html">Cloning windows</a><br>
											Also: <img height="12" width="7" src="../images/leaftip.gif"> <a href="../../ScriptingMesquite.html">User's guide to scripting language</a> <img height="12" width="7" src="../images/jdoc.gif"> class <a href="../javadoc/mesquite/lib/MesquiteCommand.html">MesquiteCommand</a> <img height="12" width="7" src="../images/jdoc.gif"> interface <a href="../javadoc/mesquite/lib/Commandable.html">Commandable</a><br>
											<img height="12" width="7" src="../images/jdoc.gif"> class <a href="../javadoc/mesquite/lib/CommandChecker.html">CommandChecker</a> <img height="12" width="7" src="../images/jdoc.gif"> class <a href="../javadoc/mesquite/lib/Snapshot.html">Snapshot</a> <img height="12" width="7" src="../images/jdoc.gif"> class <a href="../javadoc/mesquite/lib/Puppeteer.html">Puppeteer</a></td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<h2>Snapshots</h2>
		
<p>(updated August 2005)</p>
		<p>On saving a file, it is often desirable to include in the file some sort of instructions to allow Mesquite, on re-reading the file, to bring the user as close as possible to the situation when the file was saved: what windows were open, what analyses were being done, and so on. This is accomplished (as well as can be) using <b>Snapshots</b>.</p>
		<p>When the file is saved, a special MESQUITE block whose title is AUTO is saved in the NEXUS file. This block contains scripting instructions (see the page on <a href="../../ScriptingMesquite.html">scripting</a>) to recover the state of analyses and so on. Its composition is coordinated by the getSnapshotCommands method of the <a href="../javadoc/mesquite/lib/Snapshot.html">Snapshot</a> class, but the precise instructions are generated by the modules themselves.</p>
		<p>When a file is saved, all modules are surveyed and requested to indicate what commands should be given to them to return them to their current state. A module returns this information via the getSnapshot method, which returns an object of class Snapshot. A Snapshot object includes a series of Strings each of which represents a command to the module. For example, suppose a module needs an employee module to calculate a number, and responds to a corresponding command to choose which module is so used, and the module also has a parameter named intervalWidth and a corresponding command setIntervalWidth to set it. The module might override the method getSnapshot as follows:</p>
		<pre>
<code>public Snapshot getSnapshot(MesquiteFile file) {</code>
<code>Snapshot temp = new Snapshot(); temp.addLine(&quot;setIntervalWidth&quot; + Integer.toString(intervalWidth)); temp.addLine(&quot;setNumberCalculator&quot;, numberTask); return temp; }</code></pre>
		<p>There are two versions of the addLine method of the Snapshot class. The first simply passes to the Snapshot a string to use as a command. In the example, the first addLine would cause the command</p>
		<pre>
        setIntervalWidth <i>&lt;number&gt; </i>;</pre>
		<p>to be passed to the module. The second version takes two parameters: a string and reference to a MesquiteModule object. This version composes the command passed by appending the name of the module after the string, for example:</p>
		<pre>
        setNumberCalculator <i>&lt;name of module&gt;</i> ;</pre>
		<p>The reason the module reference is passed (instead of having the programmer do it by hand, as in temp.addLine(&quot;setNumberCalculator &quot; + ParseUtil.tokenize(numberTask.getName()));) is so that the module composing the MESQUITE block knows the command refers to an employee to be hired. The script composed can therefore pass the instructions to this employee immediately upon its hiring. (The main reason to do this is that to avoid, in the resulting script, ambiguity in reference to employees with the same name. The command to hire the employee should return the employee hired (recall doCommand returns an Object) and the script can send the command to that very employee hired.)</p>
		<p>Snapshots are also used to clone windows, and are presented at the user request if the user touches the &quot;Snapshot&quot; button in the information bar of a window.</p>
		<p>
		<hr>
&copy; W. Maddison &amp; D. Maddison 1999-2005</p> 
<p>&nbsp;
	</body>

</html>
